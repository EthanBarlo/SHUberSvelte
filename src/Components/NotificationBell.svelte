<script>
  import { NotificationCounter, PreviousPage } from "../stores.js";

  let hasNotifications = false;
  NotificationCounter.subscribe((value) => {
    hasNotifications = value >= 1;
  });

  function loadNotifications(){
    PreviousPage.update(value => {
      return window.location.href;
    });
    window.location.href= "./#/notifications";
  }
</script>

<div id="NotifBell">
  <p on:click={loadNotifications}>
    <svg
      class={hasNotifications ? "StartShake" : ""}
      viewBox="0 0 50 47.609169"
      id="svg12"
    >
      <defs id="defs16" />
      <g
        transform="matrix(0.1,0,0,-0.1,-10,780.83776)"
        fill="#fff"
        stroke="none"
        id="g10"
      >
        <path
          d="m 341,7807.4789 c -11.4375,-2.75 -22.4375,-13.25 -26,-24.9375 -0.4375,-1.375 -0.9375,-7.6875 -1.1875,-14 l -0.375,-11.5 -7.8125,-2.3125 c -26,-7.6875 -47.1875,-20.625 -66.1875,-40.375 -26.1875,-27.25 -40.8125,-59.125 -43.8125,-95.5625 -0.3125,-4.3125 -0.625,-36.375 -0.625,-75.625 v -68.125 l -24.0625,-24.0625 -24.0625,-24.0625 v -11.375 -11.4375 H 350 553.125 v 11.625 11.625 l -24.0625,23.875 -24.0625,23.875 v 68.25 c 0,42.5 -0.25,71.1875 -0.6875,76.1875 -3,36.9375 -19.8125,71.3125 -48.125,98.625 -19.0625,18.4375 -39.1875,29.8125 -66.625,37.8125 L 385,7757.2914 v 10.4375 c 0,5.75 -0.3125,11.6875 -0.6875,13.25 -2.75,12.125 -14.375,23.5625 -26.875,26.5625 -4.9375,1.125 -11.5625,1.125 -16.4375,-0.062 z"
          id="path2"
          style="stroke-width:0.0625"
        />
        <path
          d="m 189.375,7797.7289 c -47.0625,-39.0625 -75.875,-88.1875 -85.6875,-146.0625 -1.5,-9 -3.6875,-27.8125 -3.6875,-32.0625 0,-1.0625 1.5625,-1.125 24,-1.125 h 24 l 0.4375,4.875 c 3.3125,40.8125 16.125,75.5 39.1875,105.875 7.625,10.125 24.5625,27.0625 35.6875,35.8125 l 8.6875,6.75 -16.5,16.5 c -9,9 -16.6875,16.4375 -17.0625,16.4375 -0.3125,0 -4.4375,-3.125 -9.0625,-7 z"
          id="path4"
          style="stroke-width:0.0625"
        />
        <path
          d="m 484.0625,7788.2289 c -10.875,-10.6875 -16.625,-16.75 -16.25,-17.125 0.375,-0.3125 3,-2.375 5.9375,-4.5625 32.6875,-24.5625 55.6875,-56.0625 67.9375,-93.0625 4.875,-14.6875 8.6875,-33.75 9.875,-49.5 l 0.4375,-5.5 h 24 c 22.4375,0 24,0.062 24,1.125 0,4.25 -2.1875,23.0625 -3.6875,32.0625 -8.25,48.625 -29.5625,90.625 -64.125,126.125 -11.0625,11.3125 -28.8125,27 -30.625,26.9375 -0.3125,-0.062 -8.1875,-7.4375 -17.5,-16.5 z"
          id="path6"
          style="stroke-width:0.0625"
        />
        <path
          d="m 302.6875,7374.9164 c 1.5625,-16.1875 11.75,-30.5625 27,-38.0625 13,-6.3125 29.375,-6.0625 42.6875,0.625 14.875,7.5 23.5,20.25 24.875,36.75 l 0.4375,4.875 H 350 302.3125 Z"
          id="path8"
          style="stroke-width:0.0625"
        />
      </g>
    </svg>
  </p>
</div>

<style>
  #NotifBell {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
    margin-top: calc(((6vh) - (6vh*.8)) / 2);
    margin-right: 2%;
  }
  #NotifBell p {
    width: 100%;
    height: 100%;
    cursor: pointer;
    margin: 0;
  }
  #NotifBell svg {
    max-width: 300px;
    width: calc(6vh*.8);
  }
  .StartShake {
    animation: shake 2s linear infinite;
  }

  @keyframes shake {
    0% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(-20deg);
    }
    75% {
      transform: rotate(20deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
</style>
